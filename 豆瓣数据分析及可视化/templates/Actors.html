<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <script src="static/assets/js/echarts.min.js"></script>

    <title>豆瓣TOP300评分分布图</title>
    <meta content="" name="descriptison">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="static/assets/img/favicon.png" rel="icon">
    <link href="static/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i,900" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="static/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/assets/vendor/icofont/icofont.min.css" rel="stylesheet">
    <link href="static/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="static/assets/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="static/assets/vendor/venobox/venobox.css" rel="stylesheet">
    <link href="static/assets/vendor/aos/aos.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="static/assets/css/style.css" rel="stylesheet">

</head>

<body>

<!-- ======= Top Bar ======= -->


<!-- ======= Header ======= -->
<header id="header">
    <div class="container">

        <div class="logo float-left">
            <h1 class="text-light"><a href="temp.html"><span>Mamba</span></a></h1>
            <!-- Uncomment below if you prefer to use an image logo -->
            <!-- <a href="temp.html"><img src="static/assets/img/logo.png" alt="" class="img-fluid"></a>-->
        </div>

        <nav class="nav-menu float-right d-none d-lg-block">
            <ul>
                <li class="active"><a href="/">首页 <i class="la la-angle-down"></i></a></li>
                <li><a href="/movie">电影</a></li>
                <li><a href="/score">评分</a></li>
                <li><a href="/world">词云</a></li>
                <li><a href="/team">团队</a></li>

            </ul>
        </nav><!-- .nav-menu -->

    </div>
</header><!-- End Header -->

<!-- ======= Our Team Section ======= -->
<section id="team" class="team">
    <div class="container">

        <div class="section-title">
            <h2>top200 我最喜爱的演员</h2>

        </div>

        <!-- ======= Counts Section ======= -->
        <section class="counts section-bg">
            <div class="container">
                <div id ="main" style ="width:100%;height:800px;"></div>



            </div>
        </section><!-- End Counts Section -->

        <script type="text/javascript">
            var dom = document.getElementById("main");
            var myChart = echarts.init(dom);
            var app = {};

            var option;



            var colors = ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'];
            var bgColor = '#2E2733';

            var itemStyle = {
                star5: {
                    color: colors[0]
                },
                star4: {
                    color: colors[1]
                },
                star3: {
                    color: colors[2]
                },
                star2: {
                    color: colors[3]
                }
            };

            var data = [{
                name: '周星驰',
                itemStyle: {
                    color: colors[1]
                },
                children: [{
                    name: '喜剧、爱情',
                    children: [{
                        name: '5☆',
                        children: [{
                            name: '大话西游之大圣娶亲'
                        }]
                    }, {
                        name: '4☆',
                        children: [{
                            name: '大话西游之月光宝盒'
                        }]
                    }, {
                        name: '3☆',
                        children: [{
                            name: '喜剧之王'
                        }]
                    }]
                }, {
                    name: '喜剧、动作',
                    children: [{
                        name: '5☆',
                        children: [{
                            name: '唐伯虎点秋香'
                        }]
                    }, {
                        name: '4☆',
                        children: [{
                            name: '功夫'
                        }]
                    }, {
                        name: '3☆',
                        children: [{
                            name: '九品芝麻官'
                        }]
                    }]
                }]
            },
                {
                    name: '宫崎骏',
                    itemStyle: {
                        color: colors[2]
                    },
                    children: [{
                        name: '动画、奇幻',
                        children: [{
                            name: '5☆',
                            children: [{
                                name: '千与千寻'
                            }]
                        }, {
                            name: '4☆',
                            children: [{
                                name: '龙猫'
                            }]
                        }, {
                            name: '3☆',
                            children: [{
                                name: '哈尔的移动城堡'
                            }]
                        }]
                    }, {
                        name: '动画、冒险',
                        children: [{
                            name: '5☆',
                            children: [{
                                name: '天空之城'
                            }]
                        }, {
                            name: '4☆',
                            children: [{
                                name: '幽灵公主'
                            }]
                        },
                            {
                                name: '4☆',
                                children: [{
                                    name: '魔女宅急便'
                                }]
                            },{
                                name: '3☆',
                                children: [{
                                    name: '风之谷'
                                }]
                            }]
                    }]
                },
                {
                    name: '阿米尔',
                    itemStyle: {
                        color: colors[0]
                    },
                    children: [{
                        name: '喜剧、爱情',
                        children: [{
                            name: '5☆',
                            children: [{
                                name: '三傻大闹宝莱坞'
                            }]
                        }]
                    }, {
                        name: '运动、家庭',
                        children: [{
                            name: '5☆',
                            children: [{
                                name: '摔跤吧！爸爸'
                            }]
                        } ]
                    }, ]
                }];
            for (var j = 0; j < data.length; ++j) {
                var level1 = data[j].children;
                for (var i = 0; i < level1.length; ++i) {
                    var block = level1[i].children;
                    var bookScore = [];
                    var bookScoreId;
                    for (var star = 0; star < block.length; ++star) {
                        var style = (function (name) {
                            switch (name) {
                                case '5☆':
                                    bookScoreId = 0;
                                    return itemStyle.star5;
                                case '4☆':
                                    bookScoreId = 1;
                                    return itemStyle.star4;
                                case '3☆':
                                    bookScoreId = 2;
                                    return itemStyle.star3;
                                case '2☆':
                                    bookScoreId = 3;
                                    return itemStyle.star2;
                            }
                        })(block[star].name);

                        block[star].label = {
                            color: style.color,
                            downplay: {
                                opacity: 0.5
                            }
                        };

                        if (block[star].children) {
                            style = {
                                opacity: 1,
                                color: style.color
                            };
                            block[star].children.forEach(function (book) {
                                book.value = 1;
                                book.itemStyle = style;

                                book.label = {
                                    color: style.color
                                };

                                var value = 1;
                                if (bookScoreId === 0 || bookScoreId === 3) {
                                    value = 5;
                                }

                                if (bookScore[bookScoreId]) {
                                    bookScore[bookScoreId].value += value;
                                }
                                else {
                                    bookScore[bookScoreId] = {
                                        color: colors[bookScoreId],
                                        value: value
                                    };
                                }
                            });
                        }
                    }

                    level1[i].itemStyle = {
                        color: data[j].itemStyle.color
                    };
                }
            }

            option = {
                backgroundColor: bgColor,
                color: colors,
                series: [{
                    type: 'sunburst',
                    center: ['50%', '48%'],
                    data: data,
                    sort: function (a, b) {
                        if (a.depth === 1) {
                            return b.getValue() - a.getValue();
                        }
                        else {
                            return a.dataIndex - b.dataIndex;
                        }
                    },
                    label: {
                        rotate: 'radial',
                        color: bgColor
                    },
                    itemStyle: {
                        borderColor: bgColor,
                        borderWidth: 2
                    },
                    levels: [{}, {
                        r0: 0,
                        r: 40,
                        label: {
                            rotate: 0
                        }
                    }, {
                        r0: 40,
                        r: 105
                    }, {
                        r0: 115,
                        r: 140,
                        itemStyle: {
                            shadowBlur: 2,
                            shadowColor: colors[2],
                            color: 'transparent'
                        },
                        label: {
                            rotate: 'tangential',
                            fontSize: 10,
                            color: colors[0]
                        }
                    }, {
                        r0: 140,
                        r: 145,
                        itemStyle: {
                            shadowBlur: 80,
                            shadowColor: colors[0]
                        },
                        label: {
                            position: 'outside',
                            textShadowBlur: 5,
                            textShadowColor: '#333'
                        },
                        downplay: {
                            label: {
                                opacity: 0.5
                            }
                        }
                    }]
                }]
            };

            if (option && typeof option === 'object') {
                myChart.setOption(option);
            }

        </script>
    </div>
</section><!-- End Our Team Section -->







<a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

<!-- Vendor JS Files -->
<script src="static/assets/vendor/jquery/jquery.min.js"></script>
<script src="static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="static/assets/vendor/jquery.easing/jquery.easing.min.js"></script>
<script src="static/assets/vendor/php-email-form/validate.js"></script>
<script src="static/assets/vendor/jquery-sticky/jquery.sticky.js"></script>
<script src="static/assets/vendor/venobox/venobox.min.js"></script>
<script src="static/assets/vendor/waypoints/jquery.waypoints.min.js"></script>
<script src="static/assets/vendor/counterup/counterup.min.js"></script>
<script src="static/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="static/assets/vendor/aos/aos.js"></script>

<!-- Template Main JS File -->
<script type="text/javascript">
    var dom = document.getElementById("container");
    var myChart = echarts.init(dom);
    var app = {};

    var option;



    var colors = ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'];
    var bgColor = '#2E2733';

    var itemStyle = {
        star5: {
            color: colors[0]
        },
        star4: {
            color: colors[1]
        },
        star3: {
            color: colors[2]
        },
        star2: {
            color: colors[3]
        }
    };

    var data = [{
        name: '虚构',
        itemStyle: {
            color: colors[1]
        },
        children: [{
            name: '小说',
            children: [{
                name: '5☆',
                children: [{
                    name: '疼'
                }, {
                    name: '慈悲'
                }, {
                    name: '楼下的房客'
                }]
            }, {
                name: '4☆',
                children: [{
                    name: '虚无的十字架'
                }, {
                    name: '无声告白'
                }, {
                    name: '童年的终结'
                }]
            }, {
                name: '3☆',
                children: [{
                    name: '疯癫老人日记'
                }]
            }]
        }, ]
    }, {
        name: '非虚构',
        itemStyle: {
            color: colors[2]
        },
        children: [{
            name: '设计',
            children: [{
                name: '5☆',
                children: [{
                    name: '无界面交互'
                }]
            }, {
                name: '4☆',
                children: [{
                    name: '数字绘图的光照与渲染技术'
                }, {
                    name: '日本建筑解剖书'
                }]
            }, {
                name: '3☆',
                children: [{
                    name: '奇幻世界艺术\n&RPG地图绘制讲座'
                }]
            }]
        }, {
            name: '社科',
            children: [{
                name: '5☆',
                children: [{
                    name: '痛点'
                }]
            }, {
                name: '4☆',
                children: [{
                    name: '卓有成效的管理者'
                }, {
                    name: '进化'
                }, {
                    name: '后物欲时代的来临'
                }]
            }, {
                name: '3☆',
                children: [{
                    name: '疯癫与文明'
                }]
            }]
        }, {
            name: '心理',
            children: [{
                name: '5☆',
                children: [{
                    name: '我们时代的神经症人格'
                }]
            }, {
                name: '4☆',
                children: [{
                    name: '皮格马利翁效应'
                }, {
                    name: '受伤的人'
                }]
            }, {
                name: '3☆'
            }, {
                name: '2☆',
                children: [{
                    name: '迷恋'
                }]
            }]
        }, {
            name: '居家',
            children: [{
                name: '4☆',
                children: [{
                    name: '把房子住成家'
                }, {
                    name: '只过必要生活'
                }, {
                    name: '北欧简约风格'
                }]
            }]
        }, {
            name: '绘本',
            children: [{
                name: '5☆',
                children: [{
                    name: '设计诗'
                }]
            }, {
                name: '4☆',
                children: [{
                    name: '假如生活糊弄了你'
                }, {
                    name: '博物学家的神秘动物图鉴'
                }]
            }, {
                name: '3☆',
                children: [{
                    name: '方向'
                }]
            }]
        }, {
            name: '哲学',
            children: [{
                name: '4☆',
                children: [{
                    name: '人生的智慧'
                }]
            }]
        }, {
            name: '技术',
            children: [{
                name: '5☆',
                children: [{
                    name: '代码整洁之道'
                }]
            }, {
                name: '4☆',
                children: [{
                    name: 'Three.js 开发指南'
                }]
            }]
        }]
    }];

    for (var j = 0; j < data.length; ++j) {
        var level1 = data[j].children;
        for (var i = 0; i < level1.length; ++i) {
            var block = level1[i].children;
            var bookScore = [];
            var bookScoreId;
            for (var star = 0; star < block.length; ++star) {
                var style = (function (name) {
                    switch (name) {
                        case '5☆':
                            bookScoreId = 0;
                            return itemStyle.star5;
                        case '4☆':
                            bookScoreId = 1;
                            return itemStyle.star4;
                        case '3☆':
                            bookScoreId = 2;
                            return itemStyle.star3;
                        case '2☆':
                            bookScoreId = 3;
                            return itemStyle.star2;
                    }
                })(block[star].name);

                block[star].label = {
                    color: style.color,
                    downplay: {
                        opacity: 0.5
                    }
                };

                if (block[star].children) {
                    style = {
                        opacity: 1,
                        color: style.color
                    };
                    block[star].children.forEach(function (book) {
                        book.value = 1;
                        book.itemStyle = style;

                        book.label = {
                            color: style.color
                        };

                        var value = 1;
                        if (bookScoreId === 0 || bookScoreId === 3) {
                            value = 5;
                        }

                        if (bookScore[bookScoreId]) {
                            bookScore[bookScoreId].value += value;
                        }
                        else {
                            bookScore[bookScoreId] = {
                                color: colors[bookScoreId],
                                value: value
                            };
                        }
                    });
                }
            }

            level1[i].itemStyle = {
                color: data[j].itemStyle.color
            };
        }
    }

    option = {
        backgroundColor: bgColor,
        color: colors,
        series: [{
            type: 'sunburst',
            center: ['50%', '48%'],
            data: data,
            sort: function (a, b) {
                if (a.depth === 1) {
                    return b.getValue() - a.getValue();
                }
                else {
                    return a.dataIndex - b.dataIndex;
                }
            },
            label: {
                rotate: 'radial',
                color: bgColor
            },
            itemStyle: {
                borderColor: bgColor,
                borderWidth: 2
            },
            levels: [{}, {
                r0: 0,
                r: 40,
                label: {
                    rotate: 0
                }
            }, {
                r0: 40,
                r: 105
            }, {
                r0: 115,
                r: 140,
                itemStyle: {
                    shadowBlur: 2,
                    shadowColor: colors[2],
                    color: 'transparent'
                },
                label: {
                    rotate: 'tangential',
                    fontSize: 10,
                    color: colors[0]
                }
            }, {
                r0: 140,
                r: 145,
                itemStyle: {
                    shadowBlur: 80,
                    shadowColor: colors[0]
                },
                label: {
                    position: 'outside',
                    textShadowBlur: 5,
                    textShadowColor: '#333'
                },
                downplay: {
                    label: {
                        opacity: 0.5
                    }
                }
            }]
        }]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

</script>

</body>

</html>